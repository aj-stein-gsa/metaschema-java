<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang=""><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>DefaultFunctionLibrary.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Metaschema Core API</a> &gt; <a href="index.source.html" class="el_package">gov.nist.secauto.metaschema.core.metapath.function.library</a> &gt; <span class="el_source">DefaultFunctionLibrary.java</span></div><h1>DefaultFunctionLibrary.java</h1><pre class="source lang-java linenums">/*
 * SPDX-FileCopyrightText: none
 * SPDX-License-Identifier: CC0-1.0
 */

package gov.nist.secauto.metaschema.core.metapath.function.library;

import com.google.auto.service.AutoService;

import gov.nist.secauto.metaschema.core.metapath.MetapathConstants;
import gov.nist.secauto.metaschema.core.metapath.function.FunctionLibrary;
import gov.nist.secauto.metaschema.core.metapath.function.IFunctionLibrary;
import gov.nist.secauto.metaschema.core.metapath.item.atomic.IBooleanItem;
import gov.nist.secauto.metaschema.core.metapath.item.atomic.IDateItem;
import gov.nist.secauto.metaschema.core.metapath.item.atomic.IDateTimeItem;
import gov.nist.secauto.metaschema.core.metapath.item.atomic.IDecimalItem;
import gov.nist.secauto.metaschema.core.metapath.item.atomic.IDurationItem;
import gov.nist.secauto.metaschema.core.metapath.item.atomic.IIntegerItem;
import gov.nist.secauto.metaschema.core.metapath.item.atomic.INcNameItem;
import gov.nist.secauto.metaschema.core.metapath.item.atomic.INonNegativeIntegerItem;
import gov.nist.secauto.metaschema.core.metapath.item.atomic.INumericItem;
import gov.nist.secauto.metaschema.core.metapath.item.atomic.IPositiveIntegerItem;
import gov.nist.secauto.metaschema.core.metapath.item.atomic.IStringItem;

@SuppressWarnings({ &quot;removal&quot;, &quot;deprecation&quot; })
@AutoService(IFunctionLibrary.class)
public class DefaultFunctionLibrary
    extends FunctionLibrary {

  /**
   * Initialize the built-in function library.
   */
<span class="fc" id="L33">  public DefaultFunctionLibrary() { // NOPMD - intentional</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-abs
<span class="fc" id="L35">    registerFunction(FnAbs.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-adjust-dateTime-to-timezone
    // https://www.w3.org/TR/xpath-functions-31/#func-adjust-date-to-timezone
    // https://www.w3.org/TR/xpath-functions-31/#func-adjust-time-to-timezone
    // https://www.w3.org/TR/xpath-functions-31/#func-avg
<span class="fc" id="L40">    registerFunction(FnAvg.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-base-uri
<span class="fc" id="L42">    registerFunction(FnBaseUri.SIGNATURE_NO_ARG);</span>
<span class="fc" id="L43">    registerFunction(FnBaseUri.SIGNATURE_ONE_ARG);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-boolean
<span class="fc" id="L45">    registerFunction(FnBoolean.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-ceiling
<span class="fc" id="L47">    registerFunction(FnCeiling.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-compare
<span class="fc" id="L49">    registerFunction(FnCompare.SIGNATURE);</span>
<span class="fc" id="L50">    registerFunction(FnConcat.SIGNATURE);</span>
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-concat
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-contains
    // https://www.w3.org/TR/xpath-functions-31/#func-count
<span class="fc" id="L54">    registerFunction(FnCount.SIGNATURE);</span>
    // P2: https://www.w3.org/TR/xpath-functions-31/#func-current-date
    // P2: https://www.w3.org/TR/xpath-functions-31/#func-current-dateTime
    // P2: https://www.w3.org/TR/xpath-functions-31/#func-current-time
    // https://www.w3.org/TR/xpath-functions-31/#func-data
<span class="fc" id="L59">    registerFunction(FnData.SIGNATURE_NO_ARG);</span>
<span class="fc" id="L60">    registerFunction(FnData.SIGNATURE_ONE_ARG);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-day-from-date
    // https://www.w3.org/TR/xpath-functions-31/#func-day-from-dateTime
    // https://www.w3.org/TR/xpath-functions-31/#func-days-from-duration
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-deep-equal
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-distinct-values
    // https://www.w3.org/TR/xpath-functions-31/#func-doc
<span class="fc" id="L67">    registerFunction(FnDoc.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-doc-available
<span class="fc" id="L69">    registerFunction(FnDocumentAvailable.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-document-uri
<span class="fc" id="L71">    registerFunction(FnDocumentUri.SIGNATURE_NO_ARG);</span>
<span class="fc" id="L72">    registerFunction(FnDocumentUri.SIGNATURE_ONE_ARG);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-empty
<span class="fc" id="L74">    registerFunction(FnEmpty.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-encode-for-uri
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-ends-with
    // P2: https://www.w3.org/TR/xpath-functions-31/#func-exactly-one
    // https://www.w3.org/TR/xpath-functions-31/#func-exists
<span class="fc" id="L79">    registerFunction(FnExists.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-false
<span class="fc" id="L81">    registerFunction(FnFalse.SIGNATURE);</span>
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-floor
<span class="fc" id="L83">    registerFunction(NumericFunction.signature(MetapathConstants.NS_METAPATH_FUNCTIONS, &quot;floor&quot;, INumericItem::floor));</span>
    // P2: https://www.w3.org/TR/xpath-functions-31/#func-format-date
    // P2: https://www.w3.org/TR/xpath-functions-31/#func-format-dateTime
    // P2: https://www.w3.org/TR/xpath-functions-31/#func-format-integer
    // P2: https://www.w3.org/TR/xpath-functions-31/#func-format-number
    // P2: https://www.w3.org/TR/xpath-functions-31/#func-format-time
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-generate-id
    // P2: https://www.w3.org/TR/xpath-functions-31/#func-has-children
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-head
<span class="fc" id="L92">    registerFunction(FnHead.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-hours-from-dateTime
    // https://www.w3.org/TR/xpath-functions-31/#func-hours-from-duration
    // https://www.w3.org/TR/xpath-functions-31/#func-hours-from-time
    // https://www.w3.org/TR/xpath-functions-31/#func-implicit-timezone
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-index-of
    // https://www.w3.org/TR/xpath-functions-31/#func-innermost
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-insert-before
<span class="fc" id="L100">    registerFunction(FnInsertBefore.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-iri-to-uri
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-last
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-lower-case
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-matches
    // https://www.w3.org/TR/xpath-functions-31/#func-max
<span class="fc" id="L106">    registerFunction(FnMinMax.SIGNATURE_MAX);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-min
<span class="fc" id="L108">    registerFunction(FnMinMax.SIGNATURE_MIN);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-minutes-from-dateTime
    // https://www.w3.org/TR/xpath-functions-31/#func-minutes-from-duration
    // https://www.w3.org/TR/xpath-functions-31/#func-minutes-from-time
    // https://www.w3.org/TR/xpath-functions-31/#func-month-from-date
    // https://www.w3.org/TR/xpath-functions-31/#func-month-from-dateTime
    // https://www.w3.org/TR/xpath-functions-31/#func-months-from-duration
    // https://www.w3.org/TR/xpath-functions-31/#func-node-name
    // https://www.w3.org/TR/xpath-functions-31/#func-normalize-space
    // https://www.w3.org/TR/xpath-functions-31/#func-normalize-unicode
    // https://www.w3.org/TR/xpath-functions-31/#func-not
<span class="fc" id="L119">    registerFunction(FnNot.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-number
    // P2: https://www.w3.org/TR/xpath-functions-31/#func-one-or-more
    // https://www.w3.org/TR/xpath-functions-31/#func-outermost
    // https://www.w3.org/TR/xpath-functions-31/#func-parse-ietf-date
    // https://www.w3.org/TR/xpath-functions-31/#func-path
<span class="fc" id="L125">    registerFunction(FnPath.SIGNATURE_NO_ARG);</span>
<span class="fc" id="L126">    registerFunction(FnPath.SIGNATURE_ONE_ARG);</span>
    // P2: https://www.w3.org/TR/xpath-functions-31/#func-position
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-remove
<span class="fc" id="L129">    registerFunction(FnRemove.SIGNATURE);</span>
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-replace
    // https://www.w3.org/TR/xpath-functions-31/#func-resolve-uri
<span class="fc" id="L132">    registerFunction(FnResolveUri.SIGNATURE_ONE_ARG);</span>
<span class="fc" id="L133">    registerFunction(FnResolveUri.SIGNATURE_TWO_ARG);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-reverse
<span class="fc" id="L135">    registerFunction(FnReverse.SIGNATURE_ONE_ARG);</span>
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-root
    // https://www.w3.org/TR/xpath-functions-31/#func-round
<span class="fc" id="L138">    registerFunction(FnRound.SIGNATURE);</span>
<span class="fc" id="L139">    registerFunction(FnRound.SIGNATURE_WITH_PRECISION);</span>
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-round-half-to-even
    // https://www.w3.org/TR/xpath-functions-31/#func-seconds-from-dateTime
    // https://www.w3.org/TR/xpath-functions-31/#func-seconds-from-duration
    // https://www.w3.org/TR/xpath-functions-31/#func-seconds-from-time
    // https://www.w3.org/TR/xpath-functions-31/#func-starts-with
<span class="fc" id="L145">    registerFunction(FnStartsWith.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-static-base-uri
<span class="fc" id="L147">    registerFunction(FnStaticBaseUri.SIGNATURE);</span>
    // P0: https://www.w3.org/TR/xpath-functions-31/#func-string
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-string-join
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-string-length
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-subsequence
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-substring
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-substring-after
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-substring-before
    // https://www.w3.org/TR/xpath-functions-31/#func-sum
<span class="fc" id="L156">    registerFunction(FnSum.SIGNATURE_ONE_ARG);</span>
<span class="fc" id="L157">    registerFunction(FnSum.SIGNATURE_TWO_ARG);</span>
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-tail
<span class="fc" id="L159">    registerFunction(FnTail.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-timezone-from-date
    // https://www.w3.org/TR/xpath-functions-31/#func-timezone-from-dateTime
    // https://www.w3.org/TR/xpath-functions-31/#func-timezone-from-time
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-tokenize
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-translate
    // https://www.w3.org/TR/xpath-functions-31/#func-true
<span class="fc" id="L166">    registerFunction(FnTrue.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text
    // https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text-available
    // https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text-lines
    // P1: https://www.w3.org/TR/xpath-functions-31/#func-upper-case
    // https://www.w3.org/TR/xpath-functions-31/#func-year-from-date
    // https://www.w3.org/TR/xpath-functions-31/#func-year-from-dateTime
    // https://www.w3.org/TR/xpath-functions-31/#func-years-from-duration
    // P2: https://www.w3.org/TR/xpath-functions-31/#func-zero-or-one

    // https://www.w3.org/TR/xpath-functions-31/#func-array-get
<span class="fc" id="L177">    registerFunction(ArrayGet.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-array-size
<span class="fc" id="L179">    registerFunction(ArraySize.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-array-put
<span class="fc" id="L181">    registerFunction(ArrayPut.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-array-append
<span class="fc" id="L183">    registerFunction(ArrayAppend.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-array-subarray
<span class="fc" id="L185">    registerFunction(ArraySubarray.SIGNATURE_TWO_ARG);</span>
<span class="fc" id="L186">    registerFunction(ArraySubarray.SIGNATURE_THREE_ARG);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-array-remove
<span class="fc" id="L188">    registerFunction(ArrayRemove.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-array-insert-before
<span class="fc" id="L190">    registerFunction(ArrayInsertBefore.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-array-head
<span class="fc" id="L192">    registerFunction(ArrayHead.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-array-tail
<span class="fc" id="L194">    registerFunction(ArrayTail.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-array-reverse
<span class="fc" id="L196">    registerFunction(ArrayReverse.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-array-join
<span class="fc" id="L198">    registerFunction(ArrayJoin.SIGNATURE);</span>
    // P3: https://www.w3.org/TR/xpath-functions-31/#func-array-for-each
    // P3: https://www.w3.org/TR/xpath-functions-31/#func-array-filter
    // P3: https://www.w3.org/TR/xpath-functions-31/#func-array-fold-left
    // P3: https://www.w3.org/TR/xpath-functions-31/#func-array-fold-right
    // P3: https://www.w3.org/TR/xpath-functions-31/#func-array-for-each-pair
    // P3: https://www.w3.org/TR/xpath-functions-31/#func-array-sort
    // https://www.w3.org/TR/xpath-functions-31/#func-array-flatten
<span class="fc" id="L206">    registerFunction(ArrayFlatten.SIGNATURE);</span>

    // https://www.w3.org/TR/xpath-functions-31/#func-map-merge
<span class="fc" id="L209">    registerFunction(MapMerge.SIGNATURE_ONE_ARG);</span>
<span class="fc" id="L210">    registerFunction(MapMerge.SIGNATURE_TWO_ARG);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-map-size
<span class="fc" id="L212">    registerFunction(MapSize.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-map-keys
<span class="fc" id="L214">    registerFunction(MapKeys.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-map-contains
<span class="fc" id="L216">    registerFunction(MapContains.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-map-get
<span class="fc" id="L218">    registerFunction(MapGet.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-map-find
<span class="fc" id="L220">    registerFunction(MapFind.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-map-put
<span class="fc" id="L222">    registerFunction(MapPut.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-map-entry
<span class="fc" id="L224">    registerFunction(MapEntry.SIGNATURE);</span>
    // https://www.w3.org/TR/xpath-functions-31/#func-map-remove
<span class="fc" id="L226">    registerFunction(MapRemove.SIGNATURE);</span>
    // P3: https://www.w3.org/TR/xpath-functions-31/#func-map-for-each

    // // xpath casting functions
    // registerFunction(
    // CastFunction.signature(MetapathConstants.NS_XML_SCHEMA, &quot;boolean&quot;,
    // IBooleanItem.class, IBooleanItem::cast));
    // registerFunction(CastFunction.signature(
    // MetapathConstants.NS_XML_SCHEMA, &quot;date&quot;, IDateItem.class, IDateItem::cast));
    // registerFunction(CastFunction.signature(
    // MetapathConstants.NS_XML_SCHEMA, &quot;dateTime&quot;, IDateTimeItem.class,
    // IDateTimeItem::cast));
    // registerFunction(CastFunction.signature(
    // MetapathConstants.NS_XML_SCHEMA, &quot;decimal&quot;, IDecimalItem.class,
    // IDecimalItem::cast));
    // registerFunction(CastFunction.signature(
    // MetapathConstants.NS_XML_SCHEMA, &quot;duration&quot;, IDurationItem.class,
    // IDurationItem::cast));
    // registerFunction(CastFunction.signature(
    // MetapathConstants.NS_XML_SCHEMA, &quot;integer&quot;, IIntegerItem.class,
    // IIntegerItem::cast));
    // registerFunction(CastFunction.signature(
    // MetapathConstants.NS_XML_SCHEMA, &quot;NCName&quot;, INcNameItem.class,
    // INcNameItem::cast));
    // registerFunction(CastFunction.signature(
    // MetapathConstants.NS_XML_SCHEMA, &quot;nonNegativeInteger&quot;,
    // INonNegativeIntegerItem.class,
    // INonNegativeIntegerItem::cast));
    // registerFunction(CastFunction.signature(
    // MetapathConstants.NS_XML_SCHEMA, &quot;positiveInteger&quot;,
    // IPositiveIntegerItem.class,
    // IPositiveIntegerItem::cast));
    // registerFunction(CastFunction.signature(
    // MetapathConstants.NS_XML_SCHEMA, &quot;string&quot;, IStringItem.class,
    // IStringItem::cast));

    // metapath casting functions
<span class="fc" id="L263">    registerFunction(CastFunction.signature(</span>
        MetapathConstants.NS_METAPATH, &quot;boolean&quot;, IBooleanItem.class, IBooleanItem::cast));
<span class="fc" id="L265">    registerFunction(CastFunction.signature(</span>
        MetapathConstants.NS_METAPATH, &quot;date&quot;, IDateItem.class, IDateItem::cast));
<span class="fc" id="L267">    registerFunction(CastFunction.signature(</span>
        MetapathConstants.NS_METAPATH, &quot;date-time&quot;, IDateTimeItem.class, IDateTimeItem::cast));
<span class="fc" id="L269">    registerFunction(CastFunction.signature(</span>
        MetapathConstants.NS_METAPATH, &quot;decimal&quot;, IDecimalItem.class, IDecimalItem::cast));
<span class="fc" id="L271">    registerFunction(CastFunction.signature(</span>
        MetapathConstants.NS_METAPATH, &quot;duration&quot;, IDurationItem.class, IDurationItem::cast));
<span class="fc" id="L273">    registerFunction(CastFunction.signature(</span>
        MetapathConstants.NS_METAPATH, &quot;integer&quot;, IIntegerItem.class, IIntegerItem::cast));
<span class="fc" id="L275">    registerFunction(CastFunction.signature(</span>
        MetapathConstants.NS_METAPATH, &quot;ncname&quot;, INcNameItem.class, INcNameItem::cast));
<span class="fc" id="L277">    registerFunction(CastFunction.signature(</span>
        MetapathConstants.NS_METAPATH, &quot;non-negative-integer&quot;, INonNegativeIntegerItem.class,
        INonNegativeIntegerItem::cast));
<span class="fc" id="L280">    registerFunction(CastFunction.signature(</span>
        MetapathConstants.NS_METAPATH, &quot;positive-integer&quot;, IPositiveIntegerItem.class,
        IPositiveIntegerItem::cast));
<span class="fc" id="L283">    registerFunction(CastFunction.signature(</span>
        MetapathConstants.NS_METAPATH, &quot;string&quot;, IStringItem.class, IStringItem::cast));

    // extra functions
<span class="fc" id="L287">    registerFunction(MpRecurseDepth.SIGNATURE_ONE_ARG);</span>
<span class="fc" id="L288">    registerFunction(MpRecurseDepth.SIGNATURE_TWO_ARG);</span>
<span class="fc" id="L289">  }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>
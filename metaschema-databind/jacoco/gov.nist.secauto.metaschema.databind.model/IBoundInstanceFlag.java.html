<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang=""><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>IBoundInstanceFlag.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Metaschema Java Data Binding and Code Generation</a> &gt; <a href="index.source.html" class="el_package">gov.nist.secauto.metaschema.databind.model</a> &gt; <span class="el_source">IBoundInstanceFlag.java</span></div><h1>IBoundInstanceFlag.java</h1><pre class="source lang-java linenums">/*
 * SPDX-FileCopyrightText: none
 * SPDX-License-Identifier: CC0-1.0
 */

package gov.nist.secauto.metaschema.databind.model;

import gov.nist.secauto.metaschema.core.model.IBoundObject;
import gov.nist.secauto.metaschema.core.model.IFeatureDefinitionInstanceInlined;
import gov.nist.secauto.metaschema.core.model.IFlagInstance;
import gov.nist.secauto.metaschema.core.util.ObjectUtils;
import gov.nist.secauto.metaschema.databind.io.BindingException;
import gov.nist.secauto.metaschema.databind.model.impl.InstanceFlagInline;
import gov.nist.secauto.metaschema.databind.model.info.IFeatureScalarItemValueHandler;
import gov.nist.secauto.metaschema.databind.model.info.IItemReadHandler;
import gov.nist.secauto.metaschema.databind.model.info.IItemWriteHandler;

import java.io.IOException;
import java.lang.reflect.Field;

import javax.xml.namespace.QName;

import edu.umd.cs.findbugs.annotations.NonNull;

/**
 * Represents a flag instance bound to Java data.
 */
public interface IBoundInstanceFlag
    extends IFlagInstance, IBoundDefinitionFlag,
    IFeatureScalarItemValueHandler,
    IBoundInstance&lt;Object&gt;,
    IFeatureDefinitionInstanceInlined&lt;IBoundDefinitionFlag, IBoundInstanceFlag&gt; {

  /**
   * Create a new bound flag instance.
   *
   * @param field
   *          the Java field the instance is bound to
   * @param containingDefinition
   *          the definition containing the instance
   * @return the new instance
   */
  @NonNull
  static IBoundInstanceFlag newInstance(
      @NonNull Field field,
      @NonNull IBoundDefinitionModel&lt;IBoundObject&gt; containingDefinition) {
<span class="fc" id="L47">    return new InstanceFlagInline(field, containingDefinition);</span>
  }

  /**
   * Determines if this flag's value is used as the property name for the JSON
   * object that holds the remaining data based on this flag's containing
   * definition.
   *
   * @return {@code true} if this flag is used as a JSON key, or {@code false}
   *         otherwise
   */
  boolean isJsonKey();

  /**
   * Determines if this flag is used as a JSON &quot;value key&quot;. A &quot;value key&quot; is a
   * flag who's value is used as the property name for the containing objects
   * value.
   *
   * @return {@code true} if the flag is used as a JSON &quot;value key&quot;, or
   *         {@code false} otherwise
   */
  boolean isJsonValueKey();

  // Flag Instance Features
  // ======================

  @Override
  @NonNull
  IBoundDefinitionModel&lt;IBoundObject&gt; getContainingDefinition();

  @Override
  @NonNull
  default IBoundDefinitionModel&lt;IBoundObject&gt; getParentContainer() {
<span class="nc" id="L80">    return getContainingDefinition();</span>
  }

  /**
   * {@inheritDoc}
   * &lt;p&gt;
   * For an inline instance, this instance is the definition.
   */
  @Override
  @NonNull
  IBoundDefinitionFlag getDefinition();

  @Override
  @NonNull
  default IBoundInstanceFlag getInlineInstance() {
    // always inline
<span class="nc" id="L96">    return this;</span>
  }

  @Override
  default void deepCopy(@NonNull IBoundObject fromInstance, @NonNull IBoundObject toInstance) throws BindingException {
<span class="nc" id="L101">    Object value = getValue(fromInstance);</span>
<span class="nc bnc" id="L102" title="All 2 branches missed.">    if (value != null) {</span>
<span class="nc" id="L103">      setValue(toInstance, deepCopyItem(value, toInstance));</span>
    }
<span class="nc" id="L105">  }</span>

  @Override
  @NonNull
  default Object readItem(IBoundObject parent, @NonNull IItemReadHandler handler) throws IOException {
<span class="fc" id="L110">    return handler.readItemFlag(ObjectUtils.requireNonNull(parent, &quot;parent&quot;), this);</span>
  }

  @Override
  default void writeItem(Object item, IItemWriteHandler handler) throws IOException {
<span class="nc" id="L115">    handler.writeItemFlag(item, this);</span>
<span class="nc" id="L116">  }</span>

  @Override
  default boolean canHandleXmlQName(@NonNull QName qname) {
<span class="nc" id="L120">    return qname.equals(getXmlQName());</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>